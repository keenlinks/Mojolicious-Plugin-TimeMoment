=encoding utf-8

=head1 NAME

Mojolicious::Plugin::TimeMoment - Adds a Time::Moment object as a helper.

=head1 VERSION

0.06

=head1 SYNOPSIS

  # Mojolicious:

  $ENV{TZ} = 'America/Chicago';
  POSIX::tzset();

  $app->plugin( 'TimeMoment' => {
    dt_mdy => '%D, %-l:%M %p',
    basic_date_time => '%B %-e, %Y %-l:%M %p',
    timestamp => '%a, %d %b %Y %H:%M:%S GMT',
  });

  # Controllers: Create Time::Moment objects.

  my $tm1 = $c->tm;
  my $tm2 = $c->tm( 1465483062 );
  my $tm3 = $c->tm( 'from_string', '2016-06-09T09:37:42-05' );

  # Templates: Use created objects, or use the helper.

  %= $tm1->timestamp
  %= $tm2->month
  %= $tm3->year
  %= tm->basic_date_time
  %= tm(1465483062)->dt_mdy

=head1 DESCRIPTION

Time::Moment is a great module and fast. Mojolicious::Plugin::TimeMoment uses this module as a plugin.

=head1 METHODS

=head2 register

  $app->plugin( 'TimeMoment' );

  $app->plugin( 'TimeMoment' => {
    $format_name1 => $custom_strftime_format1,
    $format_name2 => $custom_strftime_format2,
  });

Registers the plugin into the Mojolicious app.

=head1 HELPERS

=head2 tm

  $c->tm;
  $c->tm( $epoch );
  $c->tm( $time_moment_constructor, $param );

Used to create a Time::Moment object. Time::Moment has several constructors. Used without any parameters, the localized "now" constructor creates the object. Pass in an epoch, the localized "then" constructor is used (this is a new constructor added to Time::Moment). Any of the other documented Time::Moment constructors can be used by passing the constructor name in as the first parameter.

=head2 "custom_date_formats"

The following configuration creates custom instance methods.

  $app->plugin( 'TimeMoment' => {
    dt_mdy => '%D, %-l:%M %p',
    basic_date_time => '%B %-e, %Y %-l:%M %p',
    unconventional_date => 'This is a %A in %B, to be more precise %d/%m of %Y.',
  });

  % my $tm = $c->tm( 1465483062 );
  <%= $tm->dt_mdy %> is "06/09/16, 9:37 AM"
  <%= $tm->basic_date_time %> is "June 9, 2016 9:37 AM"
  <%= $tm->unconventional_date %> is "This is a Thursday in June, to be more precise 09/06 of 2016."

  <%= tm( 1465483062 )->dt_mdy %> is "06/09/16, 9:37 AM"
  <%= tm( 1465483062 )->basic_date_time %> is "June 9, 2016 9:37 AM"
  <%= tm( 1465483062 )->unconventional_date %> is "This is a Thursday in June, to be more precise 09/06 of 2016."

=head1 SOURCE REPOSITORY

L<http://github.com/keenlinks/Mojolicious-Plugin-TimeMoment>

=head1 AUTHOR

Scott Kiehn E<lt>sk.keenlinks@gmail.comE<gt>

=head1 COPYRIGHT

Copyright 2016 - Scott Kiehn

=head1 LICENSE

This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.

=head1 SEE ALSO

L<Time::Moment>

=cut
